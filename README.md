# Название проекта: Сайт для танцевальной студии

## Краткое описание идеи проекта

Web-приложение, на котором будет располагаться информация для клиентов и администраторов танцевальной студии. Оно позволяет клиентам просматривать расписание, записываться на разовые занятия и курсы, а также бронировать залы для самостоятельных репетиций. Администраторы получают удобный инструмент для управления расписанием, клиентской базой и финансовыми потоками через продажу абонементов.

## Краткое описание предметной области

Предметная область включает в себя следующие сущности:

### 1. Студия (Studio)
**Агрегирующая сущность**, представляющая танцевальную студию как бизнес-единицу.  
**Атрибуты**: уникальный идентификатор, название, описание, контактный email, список филиалов.  
**Связи**: содержит несколько Филиалов (one-to-many).

### 2. Филиал (Branch)
**Конкретное место проведения занятий** с географической привязкой.  
**Атрибуты**: уникальный идентификатор, название филиала, полный адрес, контактный телефон, время работы, ссылка на студию.  
**Связи**: принадлежит одной Студии (many-to-one), содержит несколько ТанцевальныхЗалов (one-to-many).

### 3. Танцевальный зал (DanceHall)
**Физическое помещение** внутри филиала, предназначенное для занятий.  
**Атрибуты**: уникальный идентификатор, номер/название зала, описание (размер, тип покрытия, оборудование), вместимость, базовый график доступности.  
**Связи**: принадлежит одному Филиалу (many-to-one), используется в Занятиях (one-to-many) и Бронированиях (one-to-many).

### 4. Клиент (Client)
**Основной актор системы**, физическое лицо, пользующееся услугами студии.  
**Атрибуты**: уникальный идентификатор, ФИО, email, телефон, хэш пароля, дата регистрации, статус аккаунта.  
**Связи**: имеет Абонементы (one-to-many), создает Бронирования (one-to-many), оставляет Отзывы (one-to-many), записывается на Занятия (many-to-many через таблицу записей).

### 5. Преподаватель (Trainer)
**Сотрудник студии**, проводящий занятия.  
**Атрибуты**: уникальный идентификатор, ФИО, специализация, описание/биография, уровень квалификации, статус активности.  
**Связи**: проводит Занятия (one-to-many).

### 6. Занятие (Lesson)
**Событие в расписании** - групповое или индивидуальное занятие.  
**Атрибуты**: уникальный идентификатор, тип занятия (enum: "Открытый класс", "Специальный курс", "Индивидуальное", "Мастер-класс"), название, описание, дата и время начала, продолжительность в минутах, уровень сложности, максимальное количество участников, текущее количество записавшихся, цена, статус занятия.  
**Связи**: относится к Преподавателю (many-to-one), проходит в Танцевальном Зале (many-to-one), имеет записи Клиентов (many-to-many), получает Отзывы (one-to-many).

### 7. Абонемент (Subscription)
**Договор на обслуживание** между клиентом и студией.  
**Атрибуты**: уникальный идентификатор, дата начала действия, дата окончания действия, количество оставшихся посещений, статус (активен/приостановлен/завершен), дата покупки.  
**Связи**: принадлежит Клиенту (many-to-one), относится к ТипуАбонемента (many-to-one).

### 8. Тип абонемента (SubscriptionType)
**Шаблон с правилами** для абонементов.  
**Атрибуты**: уникальный идентификатор, название, описание, срок действия в днях, количество посещений (или безлимит), стоимость.  
**Связи**: используется в Абонементах (one-to-many).

### 9. Бронирование (Booking)
**Факт резервирования** зала клиентом для самостоятельного использования.  
**Атрибуты**: уникальный идентификатор, дата и время начала бронирования, продолжительность в минутах, статус (подтверждено/отменено/завершено), цель бронирования, дата создания.  
**Связи**: создано Клиентом (many-to-one), относится к ТанцевальномуЗалу (many-to-one).

### 10. Отзыв (Review)
**Оценка и feedback** от клиента.  
**Атрибуты**: уникальный идентификатор, числовой рейтинг (1-5), текст отзыва, дата публикации, статус модерации (на модерации/одобрен/отклонен).  
**Связи**: оставлен Клиентом (many-to-one), относится к Занятию (many-to-one).

### 11. Запись на занятие (Enrollment)
**Факт записи** клиента на конкретное занятие.  
**Атрибуты**: уникальный идентификатор, дата и время записи, статус (записан/отменил/посетил).  
**Связи**: связывает Клиента и Занятие (many-to-many).

### 12. Расписание (Schedule)
**Виртуальное представление**, агрегирующее информацию о доступности залов и занятиях.  
**Не является персистентной сущностью** - формируется на основе Занятий и Бронирований для конкретного филиала и временного периода.

## Анализ аналогичных решений

\#TODO  
1) MDC NRG  
2) Pro танцы  

## Обоснование целесообразности и актуальности проекта

\#TODO

## Описание акторов (ролей)

### 1. Гость (Unauthenticated User)
Неавторизованный пользователь, который может просматривать общую информацию о студии: расписание занятий, список филиалов, информацию о педагогах, отзывы других клиентов и цены на абонементы. Также имеет возможность зарегистрироваться в системе или войти в существующую учетную запись.

### 2. Клиент (Authenticated User)
Авторизованный пользователь, имеющий личный кабинет. Может записываться на занятия и отменять записи, бронировать танцевальные залы для репетиций, приобретать и продлевать абонементы, оставлять отзывы с рейтингом о посещенных занятиях. Имеет доступ к персональной информации: истории посещений, текущему статусу абонемента, предстоящим занятиям и бронированиям.

### 3. Администратор
Пользователь с правами полного управления системой. Осуществляет администрирование контента: управление филиалами, танцевальными залами, педагогами, расписанием занятий, типами абонементов. Может просматривать все бронирования, записи клиентов на занятия, а также модерировать отзывы пользователей.

## Use-Case диаграмма

![use-case](img/use-case.svg)

## ER-диаграмма сущностей в нотации Чена

![er](img/er.svg)

## Пользовательские сценарии

### Сценарий с регистрацией нового пользователя

1. Гость заходит на сайт студии
2. Гость нажимает кнопку регистрации
3. Гость заполняет личные данные (ФИО, email, телефон, пароль) и нажимает кнопку "Зарегистрироваться"
4. Проверка введенных данных на соответствие формату (пароль, телефон, email)
5. Проверка существования пользователя в БД
6. Создание нового пользователя
7. Автоматическая авторизация

### Сценарий с бронированием зала клиентом для самостоятельной тренировки

1. В личном кабинете клиент выбирает "Бронирование залов"
2. Клиент выбирает филиал и желаемую дату
3. Отображается список доступных залов в выбранном филиале и их характеристика
4. Клиент выбирает зал
5. Показываются доступные временные слоты для бронирования
6. Клиент выбирает необходимые слоты
7. Клиент заполняет форму на количество участников и цель бронирования и нажимает кнопку "Забронировать"
8. Проверяется отсутствие пересечения бронирований и занятий в БД
9. Клиент получает подтверждение бронирования (отображается в личном кабинете)

### Сценарий с добавлением отзыва после посещения занятия

1. Клиент нажимает кнопку «оставить отзыв» в личном кабинете в истории посещения
2. Клиент ставит оценку с 5-звездочным рейтингом
3. Клиент добавляет текстовое описание и нажимает кнопку "Отправить отзыв"
4. Проверяется, что клиент действительно посетил это занятие (статус записи "посещено")
5. Запись текста отзыва в БД со статусом "на модерации"
6. После проверки и одобрения отзыва администратором отзыв публикуется (статус записи "одобрен")

## Формализация ключевых бизнес-процессов

### 1) Регистрация пользователя

![bpmn1](img/bpmn1.svg)

### 2) Бронирование зала

![bpmn2](img/bpmn2.svg)

### 3) Добавление открытого класса

![bpmn3](img/bpmn3.svg)

## Технологический стек

### Тип приложения: Web MPA (Multi-Page Application)
- **Backend**: C++17/20
- **Frontend**: HTML5, CSS3, JavaScript (Vanilla)
- **Web Framework**: Wt (Widget Toolkit for C++)
- **СУБД**: PostgreSQL (взаимодействие через libpqxx)
- **Сборка**: CMake 3.16+
- **Дополнительные библиотеки**:
  - JSON: nlohmann/json
  - Хэширование: OpenSSL
  - Дата/время: date.h


## Верхнеуровневое разбиение на компоненты

![Разбиение_на_компоненты](img/Разбиение_на_компоненты.svg)

### UML диаграммы классов для двух отдельных компонентов - компонента доступа к данным и компонента с бизнес-логикой:

![Uml_диаграмма_классов](img/Uml_диаграмма_классов.svg)